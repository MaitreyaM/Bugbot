<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="420" viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; }
    .label { font-family: Arial, sans-serif; font-size: 12px; }
    .box   { fill: #ffffff; stroke: #333333; stroke-width: 1.5; }
    .box-gray { fill: #f5f5f5; stroke: #333333; stroke-width: 1.5; }
    .arrow { stroke: #333333; stroke-width: 1.5; marker-end: url(#arrowhead); }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">
    Multi-Agent RCA + Fix System (LangGraph)
  </text>

  <!-- Inputs -->
  <rect x="40" y="70" width="200" height="80" rx="6" class="box-gray" />
  <text x="140" y="95" text-anchor="middle" class="label">Inputs</text>
  <text x="140" y="115" text-anchor="middle" class="label">trace_1.json</text>
  <text x="140" y="135" text-anchor="middle" class="label">fastapi-project/</text>

  <!-- LangGraph Pipeline box -->
  <rect x="280" y="60" width="540" height="200" rx="10" class="box-gray" />
  <text x="550" y="80" text-anchor="middle" class="label">
    LangGraph Sequential Pipeline
  </text>

  <!-- RCA Agent -->
  <rect x="310" y="110" width="160" height="80" rx="6" class="box" />
  <text x="390" y="130" text-anchor="middle" class="label">RCA Agent</text>
  <text x="390" y="148" text-anchor="middle" class="label">tools:</text>
  <text x="390" y="164" text-anchor="middle" class="label">parse_error_trace, read_file, list_directory</text>

  <!-- Fix Agent -->
  <rect x="500" y="110" width="160" height="80" rx="6" class="box" />
  <text x="580" y="130" text-anchor="middle" class="label">Fix Suggestion Agent</text>
  <text x="580" y="150" text-anchor="middle" class="label">no tools (reasoning)</text>

  <!-- Patch Agent -->
  <rect x="690" y="110" width="160" height="80" rx="6" class="box" />
  <text x="770" y="130" text-anchor="middle" class="label">Patch Generation Agent</text>
  <text x="770" y="148" text-anchor="middle" class="label">tools:</text>
  <text x="770" y="164" text-anchor="middle" class="label">read_file, write_file, run_terminal_command</text>

  <!-- Arrows between agents -->
  <line x1="470" y1="150" x2="500" y2="150" class="arrow" />
  <line x1="660" y1="150" x2="690" y2="150" class="arrow" />

  <!-- Arrow from inputs to RCA -->
  <line x1="240" y1="110" x2="310" y2="130" class="arrow" />

  <!-- Shared Memory box -->
  <rect x="320" y="280" width="260" height="100" rx="6" class="box" />
  <text x="450" y="300" text-anchor="middle" class="label">SharedMemory (JSON state)</text>
  <text x="450" y="320" text-anchor="middle" class="label">rca, fix_plan, patch_metadata, metadata</text>

  <!-- Message Logger box -->
  <rect x="620" y="280" width="200" height="100" rx="6" class="box" />
  <text x="720" y="300" text-anchor="middle" class="label">MessageLogger</text>
  <text x="720" y="320" text-anchor="middle" class="label">agent_start/end, tool_call/result, errors</text>

  <!-- Edges from agents to shared memory & logger -->
  <line x1="390" y1="190" x2="390" y2="280" class="arrow" />
  <line x1="580" y1="190" x2="450" y2="280" class="arrow" />
  <line x1="770" y1="190" x2="450" y2="280" class="arrow" />

  <line x1="360" y1="190" x2="650" y2="280" class="arrow" />
  <line x1="580" y1="190" x2="720" y2="280" class="arrow" />
  <line x1="800" y1="190" x2="770" y2="280" class="arrow" />

  <!-- Outputs -->
  <rect x="40" y="280" width="220" height="100" rx="6" class="box-gray" />
  <text x="150" y="300" text-anchor="middle" class="label">Outputs (solution/outputs)</text>
  <text x="150" y="320" text-anchor="middle" class="label">shared_memory.json</text>
  <text x="150" y="336" text-anchor="middle" class="label">message_history.json</text>
  <text x="150" y="352" text-anchor="middle" class="label">fixed_user.py</text>

  <!-- Arrows from state/logger to outputs -->
  <line x1="320" y1="330" x2="260" y2="330" class="arrow" />
  <line x1="620" y1="320" x2="260" y2="320" class="arrow" />
</svg>


